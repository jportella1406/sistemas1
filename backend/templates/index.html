<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mercadito.pe</title>
    <!-- Ruta para el CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
</head>

<body>
    <div class="header">
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <!-- Ruta al logo -->
                    <a href="{{ url_for('index') }}"><img src="{{ url_for('static', filename='img/logo_corto.png') }}" alt="logo" width="125px"></a>
                </div>
                <nav>
                    <ul id="MenuItems">
                        <li><a href="{{ url_for('index') }}">Inicio</a></li>
                        <li><a href="{{ url_for('dashboard_productos') }}">Productos</a></li>
                        <li><a href="#ofertas">Oferta</a></li>
                        <li><a href="{{ url_for('login_page') }}">Cuenta</a></li>
                    </ul>
                    
                </nav>
                <a href="{{ url_for('login_page') }}"><img src="{{ url_for('static', filename='img/cart.png') }}" width="30px" height="30px"></a>
                <img src="{{ url_for('static', filename='img/menu.png') }}" class="menu-icon" onclick="menutoggle()">
            </div>
            <div class="row">
                <div class="col-2">
                    <h1>Una nueva forma de comprar!</h1>
                    <p>Mercadito.pe inaugura su nueva forma de compras online<p>Suscríbete!</p></p>
                    <a href="" class="btn">Comprar &#8594;</a>
                </div>
                <div class="col-2">
                    <img src="{{ url_for('static', filename='img/senora_comprando.png') }}">
                </div>
            </div>
        </div>
    </div>

<!-- Featured Products -->
<div class="small-container" id="productos">
    <h2 class="title">Productos disponibles para envío</h2>
    <div class="row">
        {% for product in productos %}
        <div class="col-4">
            <div class="product" id="product-{{ product.id }}">
                <img src="{{ url_for('static', filename='img/' + product.imagen) }}" alt="{{ product.nombre }}">
                <h4>{{ product.nombre }}</h4>
                <p>S/.{{ product.precio }}</p>
                <button class="btn btn-primary add-to-cart" id="add-to-cart-{{ product.id }}" onclick="addToCart({{ product.id }})">Add to Cart</button>
                <div class="quantity-controls d-none" id="quantity-controls-{{ product.id }}">
                    <button class="btn btn-secondary" onclick="decreaseQuantity({{ product.id }})">-</button>
                    <span id="quantity-{{ product.id }}">1</span>
                    <button class="btn btn-secondary" onclick="increaseQuantity({{ product.id }})">+</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>




    <!-- Ofertas -->
    <div class="offer" id="ofertas">
        <div class="small-container">
            <div class="row">
                <div class="col-2">
                    <img src="{{ url_for('static', filename='img/sixpack.png') }}" class="offer-img">
                </div>
                <div class="col-2">
                    <p>Oferta exclusiva solo en línea</p>
                    <h1>Six Pack de latas Cristal</h1>
                    <small>Disfruta de esta oferta exclusiva solo esta semana.<br></small>
                    <a href="#" class="btn">Comprar ahora &#8594;</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Pie de página -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-2">
                    <img src="{{ url_for('static', filename='img/logo_corto.png') }}">
                    <p style="color: white;">Nuestro propósito es llegar a su hogar de la manera más accesible y a tiempo.
                    </p>
                </div>
                <div class="footer-col-3">
                    <h3>Mi cuenta</h3>
                    <ul>
                        <li>Iniciar Sesión</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Follow Us</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                    </ul>
                </div>
            </div>
            <hr>
            <p class="copyright">Copyright 2024 - Jose Portella</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";
        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px"
            }
            else {
                MenuItems.style.maxHeight = "0px"
            }
        }
    </script>

    <!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!--Controlador del Carrito de compras de index-->
<script>
    // Controlador del botón Add to Cart
    function addToCart(productId) {
        // Ocultar el botón Add to Cart
        const addToCartButton = document.getElementById(`add-to-cart-${productId}`);
        addToCartButton.classList.add('d-none');
        
        // Mostrar los controles de cantidad
        const quantityControls = document.getElementById(`quantity-controls-${productId}`);
        quantityControls.classList.remove('d-none');
        
        // Inicializar la cantidad en 1
        document.getElementById(`quantity-${productId}`).innerText = 1;
    }

    // Función para aumentar la cantidad
    function increaseQuantity(productId) {
        const quantityElement = document.getElementById(`quantity-${productId}`);
        let currentQuantity = parseInt(quantityElement.innerText, 10);
        currentQuantity++;
        quantityElement.innerText = currentQuantity;
    }

    // Función para disminuir la cantidad
    function decreaseQuantity(productId) {
        const quantityElement = document.getElementById(`quantity-${productId}`);
        let currentQuantity = parseInt(quantityElement.innerText, 10);
        
        // Si la cantidad es mayor a 1, disminuirla
        if (currentQuantity > 1) {
            currentQuantity--;
            quantityElement.innerText = currentQuantity;
        } else {
            // Si la cantidad llega a 0, volver al botón Add to Cart
            const quantityControls = document.getElementById(`quantity-controls-${productId}`);
            quantityControls.classList.add('d-none');
            const addToCartButton = document.getElementById(`add-to-cart-${productId}`);
            addToCartButton.classList.remove('d-none');
        }
    }
</script>



</body>
</html>
